<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.6.2/prop-types.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <title>Title</title>
</head>
<body>
<div id="root"></div>
</body>
<script type="text/babel">
// 需求: A, B, C 三个组件实现数据传递, 且不通过 props 进行数据传递

// 创建 context
const ThemeContext = React.createContext({
  color: 'red'
});

class A extends React.Component {
  render() {
    // 父组件提供 context
    return (
      <ThemeContext.Provider value={{color: 'blue'}}>
        <div>
          <span>组件A</span>
          <B/>
        </div>
      </ThemeContext.Provider>
    );
  }
}

class B extends React.Component {
  render() {
    return (
      <div>
        <span>组件B</span>
        <C/>
      </div>
    );
  }
}

class C extends React.Component {
  render() {
    // 子组件消费 context
    return (
      <ThemeContext.Consumer>
        {
          context => (
            <div>
              <span style={{color: context.color}}>组件C</span>
            </div>
          )
        }
      </ThemeContext.Consumer>
    );
  }
}

ReactDOM.render(
  <A/>,
  document.getElementById('root')
);
</script>
</html>
